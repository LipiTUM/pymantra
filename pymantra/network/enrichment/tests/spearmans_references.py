import numpy as np
from scipy.stats import spearmanr


x2 = [
    [1.37905698, 2.10038556, 0.16040252],
    [-0.75498863, 1.77267099, -1.53857276],
    [-0.10407954, 0.58776359, 0.37617236],
    [-0.41908092, 1.17346653, 1.16457266]
]


y2 = [
    [0.35664017, 0.17592594, -2.23915764],
    [0.31112835, -0.90583765, -0.67430889],
    [-1.66821649, -0.00911379, -0.10622856],
    [-0.77695438, 0.78963106, 1.35621344]
]

r, p = spearmanr(x2, y2)


print("Without NAN:")
print(r[3:, :3])
print(p[3:, :3])


x2n = [
    [np.nan, 2.10038556, 0.16040252],
    [-0.75498863, np.nan, -1.53857276],
    [-0.10407954, 0.58776359, 0.37617236],
    [-0.41908092, 1.17346653, 1.16457266]
]


y2n = [
    [np.nan, 0.17592594, np.nan],
    [0.31112835, -0.90583765, -0.67430889],
    [-1.66821649, -0.00911379, -0.10622856],
    [-0.77695438, 0.78963106, 1.35621344]
]

r, p = spearmanr(x2n, y2n, nan_policy='omit')


print("With NAN:")
print(r[3:, :3])
print(p[3:, :3])
